<div class="p-8">
    <div class="mb-6">
        <h2 class="text-3xl font-bold text-gray-900 mb-2">Dashboard</h2>
        <p class="text-gray-600 text-sm">Track your progress and monitor your rental business performance</p>
    </div>

    <div class="flex border-b border-gray-200 mb-8 space-x-6">
        <span class="dashboard-tab py-2 px-0 cursor-pointer font-bold text-gray-500 transition-colors duration-300 hover:text-gray-800 border-b-2 border-transparent text-[#EA3A26] border-[#EA3A26]" data-tab="overview">Overview</span>
        <span class="dashboard-tab py-2 px-0 cursor-pointer font-bold text-gray-500 transition-colors duration-300 hover:text-gray-800 border-b-2 border-transparent" data-tab="vendor">Vendor</span>
        <span class="dashboard-tab py-2 px-0 cursor-pointer font-bold text-gray-500 transition-colors duration-300 hover:text-gray-800 border-b-2 border-transparent" data-tab="analytics">Analytics</span>
        <span class="dashboard-tab py-2 px-0 cursor-pointer font-bold text-gray-500 transition-colors duration-300 hover:text-gray-800 border-b-2 border-transparent" data-tab="requests">Requests</span>
        <span class="dashboard-tab py-2 px-0 cursor-pointer font-bold text-gray-500 transition-colors duration-300 hover:text-gray-800 border-b-2 border-transparent" data-tab="pricing">Pricing</span>
    </div>

    <!-- Tab Content Containers -->
    <div id="tab-content-overview" class="tab-content">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <!-- Metric Card 1: Total Revenue -->
            <div class="metric-card bg-white p-6 rounded-lg shadow-md flex items-center justify-between transform transition-transform duration-200 hover:scale-105 cursor-pointer" onclick="showAlert('Total Revenue')">
                <div>
                    <h3 class="text-lg text-gray-500 mb-1 font-normal">Total Revenue</h3>
                    <p class="text-4xl font-bold text-gray-900 mb-1">$13,577</p>
                    <span class="text-sm text-green-600 flex items-center gap-1">
                        <i class="fas fa-arrow-up text-xs"></i> +12% from yesterday
                    </span>
                </div>
                <div class="w-16 h-16 rounded-full bg-red-100 flex items-center justify-center">
                    <i class="fas fa-dollar-sign text-2xl text-[#EA3A26]"></i>
                </div>
            </div>

            <!-- Metric Card 2: Bookings -->
            <div class="metric-card bg-white p-6 rounded-lg shadow-md flex items-center justify-between transform transition-transform duration-200 hover:scale-105 cursor-pointer" onclick="showAlert('Bookings')">
                <div>
                    <h3 class="text-lg text-gray-500 mb-1 font-normal">Bookings</h3>
                    <p class="text-4xl font-bold text-gray-900 mb-1">300+</p>
                    <span class="text-sm text-green-600 flex items-center gap-1">
                        <i class="fas fa-arrow-up text-xs"></i> +5% from yesterday
                    </span>
                </div>
                <div class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center">
                    <i class="fas fa-calendar-alt text-2xl text-black"></i>
                </div>
            </div>

            <!-- Metric Card 3: Social Clicks -->
            <div class="metric-card bg-white p-6 rounded-lg shadow-md flex items-center justify-between transform transition-transform duration-200 hover:scale-105 cursor-pointer" onclick="showAlert('Social Clicks')">
                <div>
                    <h3 class="text-lg text-gray-500 mb-1 font-normal">Social Clicks</h3>
                    <p class="text-4xl font-bold text-gray-900 mb-1">385</p>
                    <span class="text-sm text-red-600 flex items-center gap-1">
                        <i class="fas fa-arrow-down text-xs"></i> -0.5% from yesterday
                    </span>
                </div>
                <div class="w-16 h-16 rounded-full bg-orange-100 flex items-center justify-center">
                    <i class="fas fa-share-alt text-2xl text-[#FF8600]"></i>
                </div>
            </div>

            <!-- Metric Card 4: Page Visitors -->
            <div class="metric-card bg-white p-6 rounded-lg shadow-md flex items-center justify-between transform transition-transform duration-200 hover:scale-105 cursor-pointer" onclick="showAlert('Page Visitors')">
                <div>
                    <h3 class="text-lg text-gray-500 mb-1 font-normal">Page Visitors</h3>
                    <p class="text-4xl font-bold text-gray-900 mb-1">100K</p>
                    <span class="text-sm text-green-600 flex items-center gap-1">
                        <i class="fas fa-eye text-2xl text-[#FF2424]"></i>
                    </span>
                </div>
                <div class="w-16 h-16 rounded-full bg-red-100 flex items-center justify-center">
                    <i class="fas fa-eye text-2xl text-[#FF2424]"></i>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- Chart Card 1: Daily Analytics -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex justify-between items-center pb-3 mb-4 border-b border-gray-200">
                    <h3 class="text-xl text-gray-800 font-semibold m-0">Analytics</h3>
                    <button class="px-4 py-2 bg-[#EA3A26] text-white rounded-md text-sm font-semibold hover:bg-[#F54F1D] transition-colors duration-200" onclick="showAlert('Exporting Daily Analytics data...')">Export</button>
                </div>
                <canvas id="dailyAnalyticsChart" class="max-h-[300px]"></canvas>
            </div>

            <!-- Chart Card 2: Visitor Insights -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <div class="flex justify-between items-center pb-3 mb-4 border-b border-gray-200">
                    <h3 class="text-xl text-gray-800 font-semibold m-0">Visitor Insights</h3>
                    <button class="px-4 py-2 bg-[#EA3A26] text-white rounded-md text-sm font-semibold hover:bg-[#F54F1D] transition-colors duration-200" onclick="showAlert('Exporting Monthly Visitor Insights data...')">Export</button>
                </div>
                <canvas id="monthlyVisitorChart" class="max-h-[300px]"></canvas>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl text-gray-800 font-semibold pb-3 mb-4 border-b border-gray-200">Pending Requests</h3>
            <div class="space-y-4">
                <!-- Request Item 1 -->
                <div class="request-item flex justify-between items-center pb-4 border-b border-dashed border-gray-200 last:border-b-0 cursor-pointer" onclick="showRequestDetails('New booking request', 'ABC Construction - 20-yard dumpster', 'Scheduled for tomorrow', 'Pending')">
                    <div>
                        <strong class="block text-gray-800 mb-1">New booking request - 20-yard dumpster</strong>
                        <span class="text-gray-500 text-sm">ABC Construction - Scheduled for tomorrow</span>
                    </div>
                    <span class="px-3 py-1 rounded-full text-xs font-bold uppercase text-white bg-[#FF8600]">Pending</span>
                </div>
                <!-- Request Item 2 -->
                <div class="request-item flex justify-between items-center pb-4 border-b border-dashed border-gray-200 last:border-b-0 cursor-pointer" onclick="showRequestDetails('Payment confirmation needed', 'Johnson & Co - Portable toilet rental', 'Invoice #INV-2025-001', 'Approved')">
                    <div>
                        <strong class="block text-gray-800 mb-1">Payment confirmation needed</strong>
                        <span class="text-gray-500 text-sm">Johnson & Co - Portable toilet rental</span>
                    </div>
                    <span class="px-3 py-1 rounded-full text-xs font-bold uppercase text-white bg-green-600">Approved</span>
                </div>
                <!-- Request Item 3 -->
                <div class="request-item flex justify-between items-center pb-4 last:border-b-0 cursor-pointer" onclick="showRequestDetails('Equipment maintenance request', 'Storage container #CON-003', 'Needs servicing for door repair', 'Pending')">
                    <div>
                        <strong class="block text-gray-800 mb-1">Equipment maintenance request</strong>
                        <span class="text-gray-500 text-sm">Storage container #CON-003 needs servicing</span>
                    </div>
                    <span class="px-3 py-1 rounded-full text-xs font-bold uppercase text-white bg-[#FF8600]">Pending</span>
                </div>
            </div>
        </div>
    </div>

    <div id="tab-content-vendor" class="tab-content hidden p-6 bg-white rounded-lg shadow-md text-center">
        <h3 class="text-2xl font-bold text-[#EA3A26] mb-4">Vendor Module</h3>
        <p class="text-gray-700">This section will provide detailed information and management tools related to vendors on the platform. Coming soon!</p>
    </div>

    <div id="tab-content-analytics" class="tab-content hidden p-6 bg-white rounded-lg shadow-md text-center">
        <h3 class="text-2xl font-bold text-[#EA3A26] mb-4">Detailed Analytics Module</h3>
        <p class="text-gray-700">Dive deeper into your business performance with advanced analytics and reporting. Coming soon!</p>
    </div>

    <div id="tab-content-requests" class="tab-content hidden p-6 bg-white rounded-lg shadow-md text-center">
        <h3 class="text-2xl font-bold text-[#EA3A26] mb-4">Requests Module</h3>
        <p class="text-gray-700">Manage all incoming customer requests, quotes, and inquiries from here. Coming soon!</p>
    </div>

    <div id="tab-content-pricing" class="tab-content hidden p-6 bg-white rounded-lg shadow-md text-center">
        <h3 class="text-2xl font-bold text-[#EA3A26] mb-4">Pricing Module</h3>
        <p class="text-gray-700">Configure and manage all your equipment rental and service pricing models. Coming soon!</p>
    </div>


    <!-- Request Details Modal -->
    <div id="requestDetailModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 hidden">
        <div class="bg-white p-8 rounded-lg shadow-xl w-11/12 max-w-lg relative">
            <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-3xl font-bold" onclick="closeModal('requestDetailModal')">&times;</button>
            <h3 class="text-2xl font-bold text-[#EA3A26] mb-4 border-b pb-2 border-gray-200" id="requestModalTitle">Request Details</h3>
            <div class="space-y-3 text-gray-700">
                <p><strong>Type:</strong> <span id="modalRequestType"></span></p>
                <p><strong>Customer/Item:</strong> <span id="modalRequestCustomerItem"></span></p>
                <p><strong>Description:</strong> <span id="modalRequestDescription"></span></p>
                <p><strong>Status:</strong> <span id="modalRequestStatus" class="px-3 py-1 rounded-full text-xs font-bold uppercase text-white"></span></p>
            </div>
            <div class="mt-6 flex justify-end">
                <button class="px-6 py-2 bg-gray-300 text-gray-800 rounded-md font-semibold hover:bg-gray-400 transition-colors duration-200" onclick="closeModal('requestDetailModal')">Close</button>
            </div>
        </div>
    </div>

</div>

<script>
    // Data for Daily Analytics Chart
    const dailyAnalyticsData = {
        labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
        datasets: [
            {
                label: 'Visitors',
                data: [22, 28, 18, 25, 30, 15, 20],
                backgroundColor: 'rgba(0, 0, 0, 0.7)', // Black
                borderColor: 'rgba(0, 0, 0, 1)',
                borderWidth: 1,
                borderRadius: 5
            },
            {
                label: 'Social Clicks',
                data: [15, 20, 12, 18, 22, 10, 14],
                backgroundColor: 'rgba(234, 58, 38, 0.7)', // Chili Red
                borderColor: 'rgba(234, 58, 38, 1)',
                borderWidth: 1,
                borderRadius: 5
            },
            {
                label: 'Bookings',
                data: [8, 10, 6, 9, 12, 4, 7],
                backgroundColor: 'rgba(255, 134, 0, 0.7)', // UT Orange
                borderColor: 'rgba(255, 134, 0, 1)',
                borderWidth: 1,
                borderRadius: 5
            }
        ]
    };

    // Data for Monthly Visitor Insights Chart
    const monthlyVisitorData = {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        datasets: [
            {
                label: 'Page Visitors',
                data: [400, 420, 450, 480, 520, 500, 550, 580, 600, 590, 620, 650],
                borderColor: 'rgba(234, 58, 38, 1)', // Chili Red
                backgroundColor: 'rgba(234, 58, 38, 0.2)',
                fill: true,
                tension: 0.4
            },
            {
                label: 'Social Media',
                data: [200, 210, 230, 250, 270, 260, 280, 290, 300, 295, 310, 320],
                borderColor: 'rgba(255, 134, 0, 1)', // UT Orange
                backgroundColor: 'rgba(255, 134, 0, 0.2)',
                fill: true,
                tension: 0.4
            }
        ]
    };

    function renderCharts() {
        console.log("Attempting to render charts...");
        const dailyCtx = document.getElementById('dailyAnalyticsChart');
        const monthlyCtx = document.getElementById('monthlyVisitorChart');

        if (dailyCtx && monthlyCtx) {
            console.log("Canvas elements found. Initializing Chart.js.");
            // Daily Analytics Chart (Bar Chart)
            new Chart(dailyCtx.getContext('2d'), {
                type: 'bar',
                data: dailyAnalyticsData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        title: {
                            display: false,
                            text: 'Daily Analytics'
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    }
                }
            });

            // Monthly Visitor Insights Chart (Line Chart)
            new Chart(monthlyCtx.getContext('2d'), {
                type: 'line',
                data: monthlyVisitorData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        },
                        title: {
                            display: false,
                            text: 'Monthly Visitor Insights'
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    }
                }
            });
            console.log("Charts rendered successfully.");
        } else {
            console.error("One or both canvas elements not found:", dailyCtx, monthlyCtx);
        }
    }

    // Call renderCharts when the dashboard module is loaded
    // This listener ensures it runs if the HTML is parsed normally
    document.addEventListener('DOMContentLoaded', renderCharts);

    // This part ensures it runs even if index.html fetches it later
    // and the DOMContentLoaded already fired for the main document.
    // It checks if the document is already ready, and if so, calls renderCharts directly.
    if (document.readyState === 'complete' || document.readyState === 'interactive') {
        renderCharts();
    } else {
        document.addEventListener('DOMContentLoaded', renderCharts);
    }

    // --- New Dashboard Specific Functions ---

    // Function to show a simple alert for metric cards/exports
    function showAlert(message) {
        alert("Action: " + message + "\n(In a real app, this would lead to a detailed report or download.)");
    }

    // Function to open a modal
    function openModal(modalId) {
        document.getElementById(modalId).classList.remove('hidden');
    }

    // Function to close a modal
    function closeModal(modalId) {
        document.getElementById(modalId).classList.add('hidden');
    }

    // Function to show details for a pending request in a modal
    function showRequestDetails(type, customerItem, description, status) {
        document.getElementById('modalRequestType').textContent = type;
        document.getElementById('modalRequestCustomerItem').textContent = customerItem;
        document.getElementById('modalRequestDescription').textContent = description;

        const statusSpan = document.getElementById('modalRequestStatus');
        statusSpan.textContent = status;
        // Clear previous status classes
        statusSpan.classList.remove('bg-[#FF8600]', 'bg-green-600');
        // Apply new status class
        if (status === 'Pending') {
            statusSpan.classList.add('bg-[#FF8600]');
        } else if (status === 'Approved') {
            statusSpan.classList.add('bg-green-600');
        }
        // Add more conditions for other statuses if needed

        openModal('requestDetailModal');
    }

    // Function to handle tab switching
    document.querySelectorAll('.dashboard-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            // Remove active state from all tabs
            document.querySelectorAll('.dashboard-tab').forEach(t => {
                t.classList.remove('text-[#EA3A26]', 'border-[#EA3A26]');
                t.classList.add('text-gray-500', 'border-transparent');
            });
            // Add active state to clicked tab
            this.classList.add('text-[#EA3A26]', 'border-[#EA3A26]');
            this.classList.remove('text-gray-500', 'border-transparent');

            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });

            // Show content for the active tab
            const targetTabId = `tab-content-${this.dataset.tab}`;
            document.getElementById(targetTabId).classList.remove('hidden');

            // Re-render charts if switching to the overview tab (important for responsiveness)
            if (this.dataset.tab === 'overview') {
                // Destroy existing charts if they exist to prevent duplicates
                // This part is a bit more complex with Chart.js. For now, we'll just re-render.
                // In a production app, you'd manage chart instances.
                renderCharts();
            }
        });
    });

    // Ensure Overview tab is active and its content is shown on initial load
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelector('.dashboard-tab[data-tab="overview"]').click();
    });

</script>